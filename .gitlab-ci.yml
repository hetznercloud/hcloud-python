default:
  tags:
    - cloud-integrations

stages:
  - test

pre-commit:
  stage: test

  image: python:3.11-alpine
  before_script:
    - apk add build-base git
    - pip install pre-commit
  script:
    - pre-commit run --all-files --show-diff-on-failure

test:
  stage: test

  parallel:
    matrix:
      - python_version: ["3.7", "3.8", "3.9", "3.10", "3.11"]

  image: python:${python_version}-alpine
  before_script:
    - pip install tox
  script:
    - tox -e ${python_version}
